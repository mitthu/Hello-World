#!/bin/bash
# Created on: 01-Dec-2014, 08:29 pm IST
# Added by:   mitthu (Aditya Basu)
# ----
# Use:
# - Run rsync daemon to copy files from another server.

CMD="sudo rsync --config=$HOME/.me/resources/rsyncd.conf --daemon"

case $1 in
	start)
		[ `$CMD` ] || exit
		echo 'Client command:'
		echo '--------------'
		echo 'SRC=src; DEST=dest'
		echo 'sudo rsync -avr --progress "$LOCATION" "rsync://IP/r/$DEST"'
		;;
	stop)
		sudo pkill -f "$CMD"
		[[ -z `pgrep -f "$CMD"` ]] || echo "Stop failed. The process ID is/are:" && pgrep -f "$CMD"
		;;
	help|*)
		echo "Usage: $0"
		echo "start:   Start rsync daemon"
		echo "stop:    Stop rsync daemon"
		echo "help:    Display this menu"
		;;
esac
